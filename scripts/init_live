#!/bin/bash
#mount --mkdir /dev/Files/root /mnt/root
#cd /mnt/root/
#./init_live

setfont ter-u18b.psf.gz -m 8859-2
echo "console font set."

iwctl station wlan0 connect SK_WiFiGIGAD61C_5G
echo "wifi connected."

echo "Finding fastest mirror server lists."
echo "This job take a lot of time. Wait for finish."
reflector -c "South Korea" -a 12 --sort rate \
--save /etc/pacman.d/mirrorlist
echo "Job finished."

pacman -Sy neovim pbzip2 git curl tmux zsh
echo "neovim, pbzip2, git, curl, tmux zsh installed."

sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
echo "vim-plug installed."

sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
echo "oh-my-zsh installed."
cd
rm .oh-my-zsh/themes/xiong-chiamiov-plus.zsh-theme
cd .oh-my-zsh/themes
ln -s -r ../../.config/nvim/xiong-chiamiov-plus.zsh-theme xiong-chiamiov-plus.zsh-theme
echo "my custom xiong-chiamiov-plus.zsh-theme linked."

cd
mkdir -p .config/nvim
cd .config/nvim
git clone https://github.com/createsejin/nvimt .
echo "nvimt git cloned."

cd
ln -s -r .config/nvim/.zshrc .zshrc
source .zshrc
echo ".zshrc sourced."

cd
mkdir -p .config/tmux
cd .config/tmux
ln -s -r ../nvim/tmux.conf tmux.conf 
echo "tmux.conf file linked."

cd
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
echo "tpm installed"

tmux source-file ~/.config/tmux/tmux.conf
echo "tmux.conf sourced."

timedatectl set-ntp true
timedatectl set-timezone Asia/Seoul
echo "timezone set."

echo -e "All jobs done. \u25A0"

echo -e "\nYou should install tmux plugins by attaching the tmux session and press '<prefix>I'"
