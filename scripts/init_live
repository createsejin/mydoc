#!/bin/bash
#mount --mkdir /dev/Files/root /mnt/root
#cd /mnt/root/
#./init_live

if [ "$1" = "1" ]; then
  # mount sys_back
  echo -e "\033[32m[init_live]\033[0mmount Files/sys_back partition"
  mount --mkdir /dev/Files/sys_back /mnt/sys_back

  echo -e "\033[32m[init_live]\033[0mmount home partition"
  mount /dev/Files/home /mnt/root/home

  setfont ter-u18b.psf.gz -m 8859-2
  echo -e "\033[32m[init_live]\033[0mconsole font set."

  iwctl station wlan0 connect SK_WiFiGIGAD61C_5G
  echo -e "\033[32m[init_live]\033[0mwifi connected."

  echo -e "\033[32m[init_live]\033[0mFinding fastest mirror server lists."
  echo -e "\033[32m[init_live]\033[0mThis job take a lot of time. Wait for finish."
  reflector -c "South Korea" -a 12 --sort rate \
  --save /etc/pacman.d/mirrorlist
  echo -e "\033[32m[init_live]\033[0mJob finished."

  timedatectl set-ntp true
  timedatectl set-timezone Asia/Seoul
  echo -e "\033[32m[init_live]\033[0mtimezone set."

  pacman-key --init
  pacman-key --populate archlinux
  pacman -Sy neovim git
  echo -e "\033[32m[init_live]\033[0mneovim, git installed."
fi
if [ "$1" = "2" ]; then
  cd
  mkdir -p .config/nvim
  cd .config/nvim
  git clone https://github.com/createsejin/nvimt .
  echo -e "\033[32m[init_live]\033[0mnvimt git cloned."

  sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
         https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
  echo -e "\033[32m[init_live]\033[0mvim-plug installed."

  cd
  mkdir -p .config/tmux
  cd .config/tmux
  ln -s -r ../nvim/tmux.conf tmux.conf 
  echo -e "\033[32m[init_live]\033[0mtmux.conf file linked."

  cd
  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
  echo -e "\033[32m[init_live]\033[0mtpm installed"

  tmux source-file ~/.config/tmux/tmux.conf
  echo -e "\033[32m[init_live]\033[0mtmux.conf sourced."
fi

if [ "$1" = "3" ]; then
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
  echo -e "\033[32m[init_live]\033[0moh-my-zsh installed."
fi
if [ "$1" = "4" ]; then
  cd
  rm .oh-my-zsh/themes/xiong-chiamiov-plus.zsh-theme
  cd .oh-my-zsh/themes
  ln -s -r ../../.config/nvim/xiong-chiamiov-plus.zsh-theme xiong-chiamiov-plus.zsh-theme
  echo -e "\033[32m[init_live]\033[0mmy custom xiong-chiamiov-plus.zsh-theme linked."

  cd
  rm .zshrc
  ln -s -r .config/nvim/.zshrc .zshrc
  source .zshrc
  echo -e "\033[32m[init_live]\033[0m.zshrc sourced."

  echo -e -\033[32me "[init_live]\033[0mAll jobs done. \u25A0"
  echo -e "\nYou should install tmux plugins and nvim plugins inside respective programs."
  echo "tmux -> '<prefix>I'"
  echo "nvim -> ':PlugInstall'"
fi
